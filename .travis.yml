before_install:
- openssl aes-256-cbc -K $encrypted_81a46f29ae8f_key -iv $encrypted_81a46f29ae8f_iv
  -in travis_rsa.enc -out travis_rsa -d
  - chmod 600 travis_rsa
  - mv travis_rsa ~/.ssh/id_rsa

dist: trusty
sudo: false

language: node_js
node_js:
  - '11.6.0'

addons:
  ssh_known_hosts: 188.166.54.169
  apt:
    sources:
      - google-chrome
    packages:
      - google-chrome-stable

cache:
  directories:
    - ./node_modules

install:
  - export TRAVIS_BUILD_DIR=$(pwd)
  - mkdir $HOME/src
  - cd $HOME/src
  - git clone https://github.com/andrey0902/travis_ci.git
  - npm install
  - cd $TRAVIS_BUILD_DIR

script:
  - npm run test -- --watch=false --no-progress --browsers=ChromeHeadlessNoSandbox
  - hugo -d public

deploy:
  - bash ./deploy.sh
